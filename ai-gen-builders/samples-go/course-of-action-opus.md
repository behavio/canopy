Here's a series of steps the AI assistant should go through to provide the highest quality code for adding Golang support to the Canopy parser generator, along with concrete prompts for each step:

1. Understand the Canopy codebase:
   Prompt: "Please analyze the Canopy parser generator's JavaScript codebase and provide a high-level overview of its architecture, key components, and how it generates parsers for different target languages. Highlight any important files, functions, or patterns that are relevant to adding support for a new target language."

2. Identify the necessary changes:
   Prompt: "Based on your analysis of the Canopy codebase, outline the specific changes and additions needed to support generating Golang parsers. This should include any new files, functions, or modifications to existing code. Provide a clear roadmap of the implementation steps required."

3. Design the Golang parser template:
   Prompt: "Create a template for the generated Golang parser code. This template should follow Golang's syntax and best practices, and include placeholders for the parser logic that will be filled in based on the input grammar. Ensure the template is modular, readable, and maintainable."

4. Implement the Golang code generation:
   Prompt: "Write the JavaScript code necessary to generate Golang parsers based on the provided PEG grammar. This should involve traversing the grammar structure, generating the appropriate Golang code snippets, and filling in the placeholders in the Golang parser template. Ensure the generated code is correct, efficient, and follows Golang's conventions."

5. Integrate the Golang code generation into Canopy:
   Prompt: "Integrate the Golang code generation functionality into the existing Canopy codebase. This should include adding the necessary configuration options, updating the build process, and ensuring the Golang parser generation is properly triggered based on the user's specified target language."

6. Test and validate the generated Golang parsers:
   Prompt: "Create a comprehensive test suite to validate the correctness and performance of the generated Golang parsers. This should include test cases for various grammar constructs, edge cases, and error handling. Provide a set of sample grammars and input strings to test the parsers against, and verify that the generated parsers produce the expected results."

7. Document the Golang support:
   Prompt: "Update the Canopy documentation to include information about the newly added Golang support. Provide clear instructions on how to use Canopy to generate Golang parsers, including any specific configuration options or considerations. Include code examples and usage guidelines to help users effectively utilize the Golang parsers generated by Canopy."

8. Optimize and refactor:
   Prompt: "Review the implemented Golang code generation and identify any areas for optimization or refactoring. This may include improving performance, reducing code duplication, enhancing readability, or applying design patterns. Provide specific suggestions for improvement and refactor the code accordingly."

9. Prepare a pull request:
   Prompt: "Organize the implemented changes, including code modifications, tests, and documentation updates, into a well-structured pull request. Provide a clear description of the changes made, the rationale behind them, and any relevant information for reviewers. Ensure the pull request follows the contributing guidelines of the Canopy project."

By following these steps and using the provided prompts, the AI assistant can guide the process of adding Golang support to the Canopy parser generator, resulting in high-quality code that is well-integrated, tested, and documented.
